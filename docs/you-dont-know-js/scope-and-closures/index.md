---
title: Scope & Closures
---

## 编译原理

1. 分词 (Tokenizing)，例如 var a = 2; 分解为 var、a、=、2、；。
2. 解析 (Parsing)，将词法单元转化成抽象语法树，即AST。
3. 代码生成，将AST转化为可执行的代码。

## 理解作用域

1. 作用域是一套根据名称查找变量的规则。  
2. 函数作用域。
3. 最小暴露原则，在软件设计的过程中，应该最小限度地暴露必要内容，而将其他内容都“隐藏”起来，比如某个模块的设计。

## 提升

1. 所有的声明（变量和函数）都会被移动到各自作用域的最顶端，这个过程被称为*提升*。
2. 声明本身会被提升，而包括函数表达式的赋值在内的赋值操作并不会被提升。

## 闭包

```js
function foo() {
  var a = 1;
  function bar() {
    console.log(a)
  }
  return bar;
}

var baz = foo();
baz();
```

1. 解释：无论通过何种手段将内部函数传递到所在的词法作用域以外，它都会持有对原始作用域的已用，无论在何处执行这个函数都会使用闭包。
2. 当函数可以记住并访问所在的词法作用域，即使函数是在当前词法作用域之外执行，这时就产生了闭包。
